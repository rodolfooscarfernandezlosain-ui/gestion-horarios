<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Prueba de Conexión - Locales</title>
</head>
<body>
    <h2>Prueba de conexión con Firebase - Locales</h2>
    <div id="resultado">Cargando...</div>

    <script>
        const DB_LOCALES = 'https://gestion-personal-c9edd-default-rtdb.firebaseio.com/locales.json';

        fetch(DB_LOCALES)
            .then(res => {
                if (!res.ok) throw new Error('Error en red: ' + res.status);
                return res.json();
            })
            .then(data => {
                const resultado = document.getElementById('resultado');
                if (!data || Object.keys(data).length === 0) {
                    resultado.innerHTML = '<p style="color: orange;">⚠️ No hay locales registrados.</p>';
                } else {
                    resultado.innerHTML = '<p style="color: green;">✅ Conexión exitosa. Locales encontrados:</p><pre>' + JSON.stringify(data, null, 2) + '</pre>';
                }
            })
            .catch(err => {
                document.getElementById('resultado').innerHTML = `
                    <p style="color: red;">❌ Error de conexión:</p>
                    <p><strong>${err.message}</strong></p>
                    <ul>
                        <li>¿Las reglas de Firebase permiten lectura?</li>
                        <li>¿El URL es correcto?</li>
                        <li>¿El nodo <strong>locales</strong> existe?</li>
                    </ul>
                `;
            });
    </script>
</body>
</html>
