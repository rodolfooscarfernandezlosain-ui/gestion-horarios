async function guardarCategoria(e) {
  e.preventDefault();
  const nombre = document.getElementById('cat-nombre').value.trim();
  const index = document.getElementById('edit-index').value;

  const url = 'https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec';

  const payload = {
    sheet: 'categorias',
    data: { nombre }
  };

  if (index !== '') {
    payload.action = 'update';
    payload.index = index;
  } else {
    payload.action = 'add';
  }

  try {
    await fetch(url, {
      method: 'POST',
      body: JSON.stringify(payload)
    });
    showToast('✅ Guardado en Google Sheets');
    limpiarFormulario();
    await cargarCategorias();
  } catch (err) {
    showToast('❌ Error al guardar', true);
  }
}

